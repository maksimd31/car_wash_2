{% extends 'base.html' %}

{% block content %}
<div class="d-grid gap-2">
    <a class="btn btn-secondary" href="{% url 'add_client' %}">Добавить пользователя</a>

    <a class="btn btn-secondary" onclick="runManagementCommand()">Добавить</a>

    <script>
    function runManagementCommand() {
        fetch("{% url 'random_client' %}")
            .then(response => {
                if (response.ok) {
                    console.log("Функция успешно вызвана");
                } else {
                    console.log("Ошибка вызова функции");
                }
            })
            .catch(error => {
                console.log("Произошла ошибка:", error);
            });
    }

    </script>


</div>

<div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
        <thead class="table-dark">
        <tr>
            <th scope="col">Государственный номер</th>
            <th scope="col">Ф.И.О</th>
            <th scope="col">Номер телефона</th>
            <th scope="col">Марка и модель автомобиля</th>
            <th scope="col">email</th>
            <th scope="col">Дата добавления</th>
        </tr>
        </thead>
        <tbody>
        {% if clients %}
        {% for client in clients %}
        <tr>
            <td><a href="{% url 'client' client.id %}">{{ client.license_plate }}</a></td>
            <td>{{ client.full_name }}</td>
            <td>{{ client.phone_number }}</td>
            <td>{{ client.car_model }}</td>
            <td>{{ client.email }}</td>
            <td>{{ client.created_at }}</td>
        </tr>
        {% endfor %}
        {% endif %}
    </table>
</div>

{% endblock %}

